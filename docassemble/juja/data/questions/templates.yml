table: songs.table
rows: songs
columns:
  - Titel: row_item.name.full()
  - Komponist: row_item.composer
  - Arrangeur: row_item.arranger
  - Verlag: row_item.publisher
  - Spieldauer: row_item.duration
allow reordering: True
edit:
  - name.text
---
table: members.table
rows: members
columns:
  - Name: row_item.name.full()
  - Geburtstag: row_item.birthday
  - Wohnort: row_item.address.city
  - Instrument: row_item.instrument
  - Position: row_item.position
  - Schule: |
      row_item.school if row_item.student else ''
  - Aktuelle Tätigkeit: |
      row_item.occupation if not row_item.student else ''
  - Profi: |
      "Ja" if hasattr(row_item, 'professional') and row_item.professional else "Nein"
---
code: |
  key = "juja_rechnungsnummer"
  if testmodus:
    key = key + "_test"
  month = current_datetime(timezone="Europe/Berlin").format_datetime('M')
  with redis.lock(key + "-lock", timeout=5):
    redis.set(key, 250, nx=True)
    redis.incr(key)
    strval = str(redis.get(key).decode()).zfill(3)
    rechnungsnummer = f"A-22-{month}-{strval}"
  if testmodus:
    rechnungsnummer = rechnungsnummer + "-test"
---
code: |
  rechnungsdatum = today()
---
attachment:
  name: Rechnung ${ ensemble }
  filename: Rechnung ${ ensemble }
  docx template file: Rechnung.docx
  variable name: rechnungsformular
  valid formats: [pdf]
---
# Der Inhalt der E-Mail, die an neu angemeldete Mitglieder geschickt wird. Der
# Wert von template sollte nicht verändert werden.
template: person_email
# Der E-Mail-Betreff
subject: Ihre Anmeldung zum Landeswettbewerb Jugend Jazzt 2022
# Diese Datei enthält den Mailinhalt (die Datei befindet sich im `templates`
# Ordner).
content file: E-Mail.md
---
# Der Inhalt der E-Mail, die als Benachrichtigung bei neuen Anmeldungen
# versendet wird. Der Wert von template sollte nicht verändert werden.
template: orga_email
# Der E-Mail-Betreff
subject: Das Ensemble ${ ensemble.name } hat sich zu Jugend Jazzt angemeldet
# Diese Datei enthält den Mailinhalt (die Datei befindet sich im `templates`
# Ordner).
content file: Benachrichtigung.md
---

